<h1><%= @workout.name %></h1>
<nav>
  <ul>
    <li><%= link_to 'Edit Workout', edit_workout_path %></li>
    <li><%=link_to 'Delete Workout',  @workout, method: 'delete', confirm: 'Are you sure?' %></li>
  </ul>
</nav>

<article>
  <p>Owner: <%= @workout.user.username %></p>
  <p>Difficulty: <%= @workout.difficulty %></p>
  <p>Posted Status: <%= @workout.posted? ? 'Posted' : 'Not Posted' %></p>
  <p>Workout Status: <%= @workout.started? ? 'Started' : 'Not Started' %></p>
  <p>Exercises:</p>
  <ol>
    <% @workout.exercises.each do |exercise| %>
      <li><%= link_to exercise.name, exercise %></li>
    <% end %>
  </ol>
  <p>Participants:</p>
  <ul>
    <% @workout.workout_sessions.each do |session| %>
      <li>
        <%= session.user.username %>
        <ul>
          <li>PR: <%= session.pr? ? 'Yes' : 'No' %></li>
          <li>Status: <%= session.status %></li>
          <li>Accomplished: <%= session.accomplished? ? 'Yes' : 'No' %></li>
          <li>Comments: <%= session.comment %></li>
        </ul>
        <% if session.user.id == current_user.id %>
          <%= render partial: 'workout_session', locals: {workout_session: session, method: 'put', submit: 'Update'} %>
        <% end%>
      </li>
    <% end %>
  </ul>
  <% if !@workout.workout_sessions.map(&:user_id).include?(current_user.id) %>
    <p>Join the workout!</p>
    <%= render partial: 'workout_session', locals: {workout_session: @workout_session, method: 'post', submit: 'Join'} %>
  <% end %>
</article>
